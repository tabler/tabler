<!--{% include "js/tabler-list.html", parameters="[ 'sort-name', 'sort-content', 'sort-status', 'sort-date', 'sort-tags', 'sort-category']" %}-->
<div class="card">
	<div class="card-table">
		<div class="card-header">
			<div class="row w-100">
				<div class="col">
					<h3 class="card-title mb-0">
						Employee
					</h3>
					<p class="text-secondary m-0">
						Table description.
					</p>
				</div>
				<div class="col-md-auto col-sm-12">
					{% capture html %}
					<kbd>ctrl + K</kbd>
					{% endcapture %}

					<div class="ms-auto d-flex flex-wrap btn-list">
						<div class="input-group input-group-flat input-icon w-auto">
					<span class="input-group-text">
						{% include "ui/icon.html" icon="search" %}
					</span>

							<input type="text" class="form-control table-search" autocomplete="off">

							<span class="input-group-text">
						<kbd>ctrl + K</kbd>
					</span>
						</div>

						<a href="#" class="btn btn-icon" aria-label="Button">
							{% include "ui/icon.html" icon="dots" %}
						</a>
						{% include "ui/dropdown.html" main-btn="Download" options="Action, Another action, Third action" %}
						{% include "ui/button.html" %}
					</div>
				</div>
			</div>
		</div>

		<div id="table-{{ id }}" class="table-responsive">
			<table class="table table-selectable">
				<thead>
					<tr>
						<th></th>
						<th>
							<button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-name">
								Name
							</button>
						</th>
						<th><button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-content">Content</button></th>
						<th><button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-status">Status</button></th>
						<th><button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-date">Date</button></th>
						<th><button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-tags">Tags</button></th>
						<th><button class="table-sort text-capitalize d-flex justify-content-between" data-sort="sort-category">Category</button></th>
					</tr>
				</thead>

				<tbody class="table-tbody">
					{% for person in people %}
					<tr>
						<td>
							<input class="form-check-input m-0 align-middle table-selectable-check" type="checkbox" aria-label="Select invoice" value="true">
						</td>
						<td class="sort-name">
							<span class="text-secondary">{{ person.full_name }}</span>
						</td>
						<td class="sort-content">
							<span class="text-secondary">Content</span>
						</td>
						<td class="sort-status">
							<span class="text-secondary">
								{% if forloop.index == 1 %}
									<span class="badge">Active</span>
								{% elsif forloop.index == 2 %}
									<span class="badge">Inactive</span>
								{% elsif forloop.index == 3 %}
									<span class="badge">Requested</span>
								{% else %}
								Content
								{% endif %}
							</span>
						</td>
						<td class="sort-date">
							<span class="text-secondary">{{ invoices[forloop.index].date | default: invoices[1].date }}</span>
						</td>
						<td class="sort-tags">
							{% if forloop.index == 1%}
								<span class="badge">QTA</span>
								<span class="badge">Event</span>
								<span class="badge">Tickets</span>
								<span class="badge">...</span>
							{% else %}
								<span class="text-secondary">Content</span>
							{% endif %}
						</td>
						<td class="sort-category">
							<span class="on-unchecked">
								{% if forloop.index == 1%}
									<span class="text-secondary">Agencies</span>
								{% else %}
									<span class="text-secondary">Content</span>
								{% endif %}
							</span>
							<div class="on-checked">
								<div class="d-flex justify-content-end">
									{% for i in (1..3) %}
										{% include "ui/button.html" height="sm" %}
									{% endfor %}
								</div>
							</div>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			<div class="card-footer d-flex align-items-center">
				<div class="dropdown">
					<a class="btn dropdown-toggle" data-bs-toggle="dropdown">
						<span id="page-count" class="me-1">10</span>
						<span>records</span>
					</a>
					<div class="dropdown-menu">
						<a class="dropdown-item" onclick="setPageListItems(event)" data-value="5">5 records</a>
						<a class="dropdown-item" onclick="setPageListItems(event)" data-value="10">10 records</a>
						<a class="dropdown-item" onclick="setPageListItems(event)" data-value="20">20 records</a>
						<a class="dropdown-item" onclick="setPageListItems(event)" data-value="50">50 records</a>
					</div>
				</div>

				{% include "ui/pagination.html" class="m-0 ms-auto" no-words="true" count=10 %}
			</div>
		</div>
	</div>
</div>

<script>
	const setPageListItems = e => {
		window.tabler_list["table-{{ id }}"].page = parseInt(e.target.dataset.value)
		window.tabler_list["table-{{ id }}"].update()

		document.querySelector("#page-count").innerHTML = e.target.dataset.value
	}

	window.tabler_list = window.tabler_list || {}
	document.addEventListener("DOMContentLoaded", function() {
		const list = window.tabler_list["table-{{ id }}"] = new List('table-{{ id }}', {
			sortClass: 'table-sort',
			listClass: 'table-tbody',
			page: 10,
			pagination: {
				item: value => {
					return `<li class="page-item"><a class="page-link cursor-pointer">${value.page}</a></li>`
				},
				innerWindow: 1,
				outerWindow: 1,
				left: 0,
				right: 0,
			},
			valueNames: [ 'sort-name', 'sort-content', 'sort-status', 'sort-date', 'sort-tags', 'sort-category']
	});

		const searchInput = document.querySelector('.table-search');

		if (searchInput) {
			searchInput.addEventListener('input', () => {
				list.search(searchInput.value)
			})
		}
	})
</script>
